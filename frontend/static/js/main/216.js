(self.webpackChunkbiz_app=self.webpackChunkbiz_app||[]).push([[216],{44216:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var n=a(67294),r=a(37703),l=a(45949),s=a(29130),c=a(8295),o=a(42905),i=a(73288),u=a(13835),m=a(76523),p=a(72714),d=a(79860),g=a(70601);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function E(e){var t=e.changePage,a=e.sales_people,r=e.addSalesTarget,s=f((0,n.useState)(""),2),c=s[0],o=s[1],h=f((0,n.useState)([]),2),E=h[0],v=h[1],y=f((0,n.useState)([]),2),b=(y[0],y[1]),S=f((0,n.useState)(""),2),N=S[0],w=S[1],_=f((0,n.useState)(""),2),x=_[0],P=_[1],Z=f((0,n.useState)(""),2),T=Z[0],k=Z[1],j=f((0,n.useState)(""),2),M=j[0],A=j[1],C=f((0,n.useState)(null),2),O=C[0],R=C[1],B=f((0,n.useState)(null),2),I=B[0],U=B[1],D=f((0,n.useState)(null),2),q=D[0],L=D[1],K=f((0,n.useState)(""),2),$=K[0],z=K[1];(0,n.useEffect)((function(){b(a);var e=u.Z.filter((function(e){return"KES"===e.cc}))[0];R(e||u.Z[0])}),[a]);var G={anchorEl:I,popUpItems:u.Z};return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-header"},n.createElement("div",{className:"row justify-content-between ml-2 mr-2"},n.createElement("center",null,n.createElement("h3",null,"Add Sales Target")),n.createElement(i.Z,{prevPropsName:"Groups",propsName:"Add Group",changePage:t}))),n.createElement("div",{className:"card-content"},n.createElement(m.Z,{isError:q,responseMessage:$}),n.createElement("div",{className:"row justify-content-between mt-2"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",null,"Target Name*  ",n.createElement(g.Z,{message:"Input the best name"})," "),n.createElement("input",{type:"text",className:"form-control",placeholder:"Please enter target name",value:c,name:"target_name",onChange:function(e){return o(e.target.value)},required:!0,autoFocus:!0})),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group "},n.createElement("label",null,"Select Salesperson*  ",n.createElement(g.Z,{message:"choose a saleperson"}),"  "),n.createElement(d.Z,{isMulti:!0,value:E,setValue:function(e){return v(e)},fetchData:l.d8,closeMenuOnSelect:!1}))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group "},n.createElement("label",null,"Select Target Period*  ",n.createElement(g.Z,{message:"Choose the timeframe"}),"   "),n.createElement("select",{className:"form-control",value:M,onChange:function(e){return A(e.target.value)},required:!0},n.createElement("option",null,"..."),n.createElement("option",{value:"Daily"},"Daily"),n.createElement("option",{value:"Weekly"},"Weekly"),n.createElement("option",{value:"Monthly"},"Monthly"),n.createElement("option",{value:"Yearly"},"Yearly"))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Target Sales* ",n.createElement(g.Z,{message:"Input the right target"}),"  "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return U(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&O?n.createElement("div",null,O.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:N,name:"sales",onChange:function(e){return w(e.target.value)},required:!0}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00")))))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Monetary Reward ",n.createElement(g.Z,{message:"Enter the reward amount"}),"   "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return U(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&O?n.createElement("div",null,O.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:x,name:"sales",onChange:function(e){return P(e.target.value)}}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00"))))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Percentage Reward ",n.createElement(g.Z,{message:"Enter the reward %"}),"   "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{className:"input-group-prepend"},n.createElement("span",{className:"input-group-text"},"%")),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:T,name:"sales",onChange:function(e){return k(e.target.value)}}))))),n.createElement("div",{className:"row justify-content-end"},n.createElement("div",{onClick:function(){return function(){if(L(null),z(""),c&&E.length>0&&M&&N){var e=E.map((function(e){return e.value.id}));r({name:c,sale_people:JSON.stringify(e),period:M,target_sales:N,reward_money:x,reward_per:T})}else L(!0),z("Please input all stared fields")}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Add SalesGroup"))))),n.createElement(p.Z,{popUpValues:G,handlePopUpClick:function(e){var t=u.Z.filter((function(t){return t.cc===e}))[0];t&&R(t),U(null)},handlePopUp:function(e){return U(I?null:e.currentTarget)}}))}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function b(e){var t=e.target,a=e.updateSalesTarget,r=e.changePage,s=v((0,n.useState)(""),2),c=s[0],o=s[1],f=v((0,n.useState)([]),2),h=f[0],E=f[1],y=v((0,n.useState)([]),2),b=(y[0],y[1],v((0,n.useState)(""),2)),S=b[0],N=b[1],w=v((0,n.useState)(""),2),_=w[0],x=w[1],P=v((0,n.useState)(""),2),Z=P[0],T=P[1],k=v((0,n.useState)(""),2),j=k[0],M=k[1],A=v((0,n.useState)(null),2),C=A[0],O=A[1],R=v((0,n.useState)(null),2),B=R[0],I=R[1],U=v((0,n.useState)(null),2),D=U[0],q=U[1],L=v((0,n.useState)(""),2),K=L[0],$=L[1];(0,n.useEffect)((function(){if(t){o(t.name);var e=t.salesmen.map((function(e){return{value:e,label:e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.first_name}}));E(e),M(t.period),N(t.target_sales),x(t.reward_money),T(t.reward_per)}var a=u.Z.filter((function(e){return"KES"===e.cc}))[0];O(a||u.Z[0])}),[t]);var z={anchorEl:B,popUpItems:u.Z};return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-header"},n.createElement("div",{className:"row justify-content-between ml-2 mr-2"},n.createElement("center",null,n.createElement("h3",null,"Edit Sales Target")),n.createElement(i.Z,{prevPropsName:"Groups",propsName:"Edit Group",changePage:r}))),n.createElement("div",{className:"card-content"},n.createElement(m.Z,{isError:D,responseMessage:K}),n.createElement("div",{className:"row justify-content-between mt-2"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",null,"Target Name*  ",n.createElement(g.Z,{message:"Input the best name"}),"  "),n.createElement("input",{type:"text",className:"form-control",placeholder:"Please enter target name",value:c,name:"target_name",onChange:function(e){return o(e.target.value)},required:!0,autoFocus:!0})),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group "},n.createElement("label",null,"Select Salesperson* ",n.createElement(g.Z,{message:"choose a salesperson"}),"   "),n.createElement(d.Z,{isMulti:!0,value:h,setValue:function(e){return E(e)},fetchData:l.d8,closeMenuOnSelect:!1}))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group "},n.createElement("label",null,"Select Target Period* ",n.createElement(g.Z,{message:"Choose the timeframe"}),"    "),n.createElement("select",{className:"form-control",value:j,onChange:function(e){return M(e.target.value)},required:!0},n.createElement("option",null,"..."),n.createElement("option",{value:"Daily"},"Daily"),n.createElement("option",{value:"Weekly"},"Weekly"),n.createElement("option",{value:"Monthly"},"Monthly"),n.createElement("option",{value:"Yearly"},"Yearly"))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Target Sales* ",n.createElement(g.Z,{message:"Input the right target"}),"  "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return I(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&C?n.createElement("div",null,C.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:S,name:"sales",onChange:function(e){return N(e.target.value)},required:!0}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00")))))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Monetary Reward ",n.createElement(g.Z,{message:"Enter the reward amount"}),"     "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return I(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&C?n.createElement("div",null,C.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:_,name:"sales",onChange:function(e){return x(e.target.value)}}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00"))))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Percentage Reward ",n.createElement(g.Z,{message:"Enter the reward %"}),"     "),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{className:"input-group-prepend"},n.createElement("span",{className:"input-group-text"},"%")),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:Z,name:"sales",onChange:function(e){return T(e.target.value)}}))))),n.createElement("div",{className:"row justify-content-end"},n.createElement("div",{onClick:function(){return function(){if(q(null),$(""),c&&h.length>0&&j&&S){var e=h.map((function(e){return e.value.id}));a({name:c,sale_people:JSON.stringify(e),period:j,target_sales:S,reward_money:_,reward_per:Z,id:t.id})}else q(!1),$("Please input all stared fields")}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Save SalesGroup"))))),n.createElement(p.Z,{popUpValues:z,handlePopUpClick:function(e){var t=u.Z.filter((function(t){return t.cc===e}))[0];t&&O(t),I(null)},handlePopUp:function(e){return I(B?null:e.currentTarget)}}))}a(1717);var S=a(32941),N=a(2376),w=a(68134),_=a(90482),x=a(17812),P=a(87748),Z=a(66037),T=a(21539),k=a(41076),j=a(22318);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function C(e){var t=e.index,a=e.target,r=e.canManage,l=e.deleteSalesTarget,s=e.viewEditSalesTarget,c=M((0,n.useState)(null),2),o=c[0],i=c[1],u=M((0,n.useState)(!1),2),m=u[0],p=u[1],d={anchorEl:o,popUpItems:[{icon:n.createElement("i",{className:"fas fa-edit btn_type"}),name:"Edit",value:"Edit"},{icon:n.createElement("i",{className:"fas fa-trash btn_type"}),name:"Delete",value:"Delete"}]};return n.createElement(n.Fragment,null,n.createElement("tr",{className:"ml-2",key:t},n.createElement("td",{width:"10%",className:"text-right"},t+1),n.createElement("td",{width:"30%",className:"text-right"},a.name),n.createElement("td",{width:"10%",className:"text-right"},a.period),n.createElement("td",{width:"30%",className:"text-right"},a.target_sales_currency,". ",(0,w.Z)(a.target_sales)),n.createElement("td",{width:"10%",className:"text-right"},n.createElement(x.Z,{"aria-label":"expand row",size:"small",onClick:function(){return p(!m)}},m?n.createElement("i",{className:"fas fa-sort-up bg_themed"}):n.createElement("i",{className:"fas fa-sort-down bg_themed"}))),n.createElement("td",{width:"10%",className:"text-right"},r?n.createElement("i",{onClick:function(e){return i(e.currentTarget)},className:"fas fa-ellipsis-h btn_type"}):n.createElement("div",null))),n.createElement("tr",null,n.createElement("td",{style:{paddingBottom:0,paddingTop:0},colSpan:12},n.createElement(Z.Z,{in:m,timeout:"auto",unmountOnExit:!0},n.createElement(P.Z,{margin:1},n.createElement(j.Z,{variant:"h6",gutterBottom:!0,component:"div"},"Sales People"),n.createElement(T.Z,{size:"small","aria-label":"purchases"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"#"),n.createElement("th",null),n.createElement("th",null,"Name"),n.createElement("th",null,"Phone"),n.createElement("th",{align:"right"},"Email"))),n.createElement(k.Z,null,a.salesmen.map((function(e,t){return n.createElement("tr",{key:t},n.createElement("td",null,t+1),n.createElement("td",null,n.createElement("div",{className:"sale_target_img"},n.createElement("img",{src:e.pic?"..".concat(e.pic):"../static/images/login.jpg",alt:"offer logo"}))),n.createElement("td",null,e.first_name," ",e.last_name),n.createElement("td",null,e.phone),n.createElement("td",null,e.email))})))))))),n.createElement(_.Z,{popUpValues:d,handlePopUpClick:function(e){"Delete"==e?l(a.id):"Edit"==e&&s(a),i(null)},handlePopUp:function(e){return i(o?null:e.currentTarget)}}))}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function B(e){var t=e.sales_target,a=e.changePage,r=e.canManage,l=e.deleteSalesTarget,s=e.viewEditSalesTarget,c=e.pageDetails,o=e.fetchSalesTarget,i=O((0,n.useState)(""),2),u=i[0],m=i[1],p=O((0,n.useState)(25),2),d=p[0],g=p[1];return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"bg_themed container-fluid align-items-center"},n.createElement("div",{className:"row justify-content-between align-items-center"},n.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 form-group p-2"},n.createElement("div",{className:"input-group p-0 m-0"},n.createElement("input",{type:"text",className:"form-control border-right-0 m-0 p-0 ",value:u,onChange:function(e){return m(e.target.value)},onKeyUp:(0,S.Z)((function(){o(1,u||"",d)}),2e3),placeholder:"Search"}),n.createElement("span",{className:"input-group-text border-left-0"},n.createElement("i",{className:"ml-1 fas fa-search"})))),n.createElement("div",null,r?n.createElement("div",{onClick:function(){return a(2)},className:"btn btn-primary btn-lg table_menu_btn mr-3"},"Add Sales Target"):n.createElement("div",null))),n.createElement("div",{className:"row justify-content-center"},n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{width:"10%",className:"text-right"},"#"),n.createElement("th",{width:"30%",className:"text-right"},"Target Name"),n.createElement("th",{width:"10%",className:"text-right"},"Period"),n.createElement("th",{width:"30%",className:"text-right"},"Target Sales"),n.createElement("th",{width:"10%",className:"text-right"},"Sales People"),n.createElement("th",{width:"10%",className:"text-right"},"Actions"))),n.createElement("tbody",null,t.map((function(e,t){return n.createElement(C,{target:e,index:t,key:t,canManage:r,viewEditSalesTarget:s,deleteSalesTarget:l})})))),c.last_page&&c.last_page>1?n.createElement(N.Z,{rows:d,changeRows:function(e){o(1,u,e),g(e)},pageDetails:c,changePage:function(e){o(e,u,d)}}):n.createElement("div",null)))))}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(81402);var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(u,e);var t,a,r,l,i=(r=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(l){var a=K(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return q(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).state={openSnackBar:!1,isError:null,responseMessage:"",snackPosition:{vertical:"top",horizontal:"center"},currentSalesTarget:null,currentPage:1},t.closeSnackBar=t.closeSnackBar.bind(L(t)),t.setResponse=t.setResponse.bind(L(t)),t.changePage=t.changePage.bind(L(t)),t.viewEditSalesTarget=t.viewEditSalesTarget.bind(L(t)),t}return t=u,(a=[{key:"changePage",value:function(e){this.setState({currentPage:e})}},{key:"viewEditSalesTarget",value:function(e){this.setState({currentSalesTarget:e,currentPage:3})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.message;a!==e.error?this.setResponse(a):n!==e.message&&(201==n.status&&this.setState({currentPage:1}),this.setResponse(n))}},{key:"componentDidMount",value:function(){this.props.fetchSalesTarget(1)}},{key:"setResponse",value:function(e){var t=Object.keys(e.responseMessage)[0],a=e.responseMessage[t];a instanceof Array?this.setState({responseMessage:a[0],isError:e.isError,openSnackBar:!0}):this.setState({responseMessage:a,isError:e.isError,openSnackBar:!0})}},{key:"closeSnackBar",value:function(){this.setState({openSnackBar:!1})}},{key:"render",value:function(){var e=this.props,t=e.salesReducer,a=e.addSalesTarget,r=e.fetchSalesPeople,l=e.auth,i=e.updateSalesTarget,u=e.deleteSalesTarget,m=e.fetchSalesTarget,p=t.isLoading,d=t.sales_target,g=t.sales_people,f=t.target_current_page,h=t.target_last_page,v=this.state,y=v.openSnackBar,S=v.isError,N=v.responseMessage,w=v.snackPosition,_=v.currentPage,x=v.currentSalesTarget,P={isError:S,responseMessage:N,openSnackBar:y,snackPosition:w};if(!l.group.permission.can_view_salesmen||!l.account.dist_options.use_sales_target)return(0,s.Z)(this.props.auth.group.permission);var Z={current_page:f,last_page:h};switch(_){case 1:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(B,{sales_target:d,changePage:this.changePage,sales_people:g,canManage:l.group.permission.can_manage_salesmen,viewEditSalesTarget:this.viewEditSalesTarget,deleteSalesTarget:u,pageDetails:Z,fetchSalesTarget:m}),n.createElement(c.Z,{values:P,closeSnackBar:this.closeSnackBar}));case 2:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(E,{sales_target:d,addSalesTarget:a,canManage:l.group.permission.can_manage_salesmen,changePage:this.changePage}),n.createElement(c.Z,{values:P,closeSnackBar:this.closeSnackBar}));case 3:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(b,{target:x,updateSalesTarget:i,canManage:l.group.permission.can_manage_salesmen,changePage:this.changePage}),n.createElement(c.Z,{values:P,closeSnackBar:this.closeSnackBar}));default:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(B,{sales_target:d,addSalesTarget:a,fetchSalesPeople:r,sales_people:g,canManage:l.group.permission.can_manage_salesmen,updateSalesTarget:i,deleteSalesTarget:u}),n.createElement(c.Z,{values:P,closeSnackBar:this.closeSnackBar}))}}}])&&U(t.prototype,a),u}(n.Component);const z=(0,r.$j)((function(e){return{auth:e.authReducer,salesReducer:e.salesReducer,error:e.errorsReducer,message:e.messagesReducer}}),{fetchSalesTarget:l.ci,addSalesTarget:l.XR,fetchSalesPeople:l.rB,deleteSalesTarget:l.C$,updateSalesTarget:l.g})($)},45949:(e,t,a)=>{"use strict";a.d(t,{rB:()=>i,d8:()=>u,_y:()=>m,Wd:()=>p,sr:()=>d,ci:()=>g,XR:()=>f,g:()=>h,C$:()=>E});var n=a(9669),r=a.n(n),l=a(34464),s=a(44997),c=a(58343),o=a(66808),i=function(e,t,a){return function(n,s){n({type:o.bc});var i=(0,l.Z)(s),u="../retailer/api/saleman?page=".concat(e);t&&(u+="&query=".concat(t)),a&&(u+="&rows=".concat(a)),r().get(u,i).then((function(t){n({type:o.iN,payload:{sales_people:t.data.sales_people,currentPage:e,lastPage:t.data.last_page}})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:o.Li})}))}};function u(e,t,a){var n=a.page,l=localStorage.getItem("token"),s={headers:{Accept:"application/json","Content-Type":"application/json"}};l&&(s.headers.Authorization="Token ".concat(l));var c=e?"../retailer/api/saleman?page=".concat(n,"&query=").concat(e):"../retailer/api/saleman?page=".concat(n);return new Promise((function(e,t){r().get(c,s).then((function(t){var a=!1;t.data.last_page>n&&(a=!0);var r=t.data.sales_people.map((function(e){return{value:e,label:e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.first_name}}));e({options:r,hasMore:a,additional:{page:n+1}})})).catch((function(e){t(e.response.data)}))}))}var m=function(e){return function(t,a){t({type:o.bc});var n=(0,s.Z)(a);r().post("../retailer/api/saleman/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.es,payload:e.data}),t({type:o.SV,payload:e.data.view_complete})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},p=function(e){return function(t,a){t({type:o.bc});var n=(0,s.Z)(a);r().put("../retailer/api/saleman/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.mF,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},d=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().delete("../retailer/api/saleman?salesman_id=".concat(e),n).then((function(a){t((0,c.i)(a.data,a.status)),t({type:o.Iy,payload:e})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},g=function(e,t,a){return function(n,s){n({type:o.bc});var i=(0,l.Z)(s),u="../retailer/api/sales_target?page=".concat(e);t&&(u+="&query=".concat(t)),a&&(u+="&rows=".concat(a)),r().get(u,i).then((function(t){console.log(t.data),n({type:o.Fl,payload:{sales_target:t.data.sales_target,currentPage:e,lastPage:t.data.last_page}})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:o.Li})}))}},f=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().post("../retailer/api/sales_target/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.Od,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},h=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().put("../retailer/api/sales_target/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.Qc,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},E=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().delete("../retailer/api/sales_target?salestarget_id=".concat(e),n).then((function(a){t((0,c.i)(a.data,a.status)),t({type:o.bd,payload:e})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}}},54376:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".sales_round_img {\n    width: 70px;\n    height: 70px;\n    overflow: hidden;\n    border-radius: 5px;\n}\n\n.sales_round_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n.add_sales_img {\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    margin-bottom: 5px;\n}\n\n.add_sales_img img {\n    height: 100%;\n    width: 100%;\n    object-fit: contain;\n}\n\n.sale_target_img {\n    height: 40px;\n    width: 40px;\n    overflow: hidden;\n    border-radius: 10px;\n}\n\n.sale_target_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}",""]);const l=r},81402:(e,t,a)=>{"use strict";var n=a(93379),r=a.n(n),l=a(54376);r()(l.Z,{insert:"head",singleton:!1}),l.Z.locals}}]);