(self.webpackChunkbiz_app=self.webpackChunkbiz_app||[]).push([[811],{24811:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=n(67294),a=n(37703),l=n(36647),o=n(69688),c=n(8295),s=n(42905),i=n(68134);function u(e){var t=e.reports,n=e.getIndivialReports;return r.createElement(r.Fragment,null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,"Target Group"),r.createElement("th",null,"Period"),r.createElement("th",null,"Target"),r.createElement("th",null,"Reward Amount"),r.createElement("th",null,"Reward Perc"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,t?t.map((function(e,t){return r.createElement("tr",{key:t},r.createElement("td",null,t+1),r.createElement("td",null,e.name),r.createElement("td",null,e.period," "),r.createElement("td",null,e.target_sales_currency," ",(0,i.Z)(e.target_sales)),r.createElement("td",null,e.reward_money_currency," ",(0,i.Z)(e.reward_money?e.reward_money:0)),r.createElement("td",null,e.reward_per?e.reward_per:0),r.createElement("td",{onClick:function(){return n(e.id)}},r.createElement("button",{className:"btn btn-primary"},"View")))})):r.createElement("div",null))))}function m(e){var t=e.reports,n=e.viewSalesTable;return r.createElement(r.Fragment,null,r.createElement("div",{className:"row justify-content-end"},r.createElement("div",{onClick:function(){return n()},className:"badge badge-danger btn_type mr-2 mb-2"},"Groups")),r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null),r.createElement("th",null,"Name"),r.createElement("th",null,"Phone"),r.createElement("th",null,"Email"),r.createElement("th",null,"Complete"),r.createElement("th",null,"Target"),r.createElement("th",null,"Status"))),r.createElement("tbody",null,t.map((function(e,t){return r.createElement("tr",{key:t},r.createElement("td",null,t+1),r.createElement("td",null,r.createElement("div",{className:"report_sales_round_img"},r.createElement("img",{src:e.pic?"..".concat(e.pic):"../static/images/login.jpg",alt:"customer image"}))),r.createElement("td",null,e.first_name," ",e.last_name),r.createElement("td",null,e.phone),r.createElement("td",null,e.email),r.createElement("td",null,e.target_currency," ",(0,i.Z)(e.statics)),r.createElement("td",null,e.target_currency," ",(0,i.Z)(e.target)),r.createElement("td",null,e.statics-e.target>0?r.createElement("span",{className:"dot"},r.createElement("i",{className:"bg-success"}),"Completed"):r.createElement("span",{className:"dot"},r.createElement("i",{className:"bg-warning"}),"Pending")))})))))}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=e.reports,n=e.sales_men_reports,a=e.fetchSalesTargetReport,l=e.fetchIndividualSalesManStatics,c=[{name:"All",value:""},{name:"Daily",value:"Daily"},{name:"Weekly",value:"Weekly"},{name:"Monthly",value:"Monthly"},{name:"Yearly",value:"Yearly"}],s=p((0,r.useState)(c[0].value),2),i=s[0],d=s[1],f=p((0,r.useState)((0,o.Z)(new Date)),2),h=f[0],y=f[1],g=p((0,r.useState)(null),2),v=g[0],E=g[1],b=p((0,r.useState)(1),2),_=b[0],S=b[1],w=1==_?r.createElement(u,{reports:t,getIndivialReports:function(e){return R(h,e)}}):r.createElement(m,{reports:n,viewSalesTable:function(){S(1)}});function k(e,t){a(e,t)}function R(e,t){l(e,t),S(2),E(t)}return r.createElement("div",null,r.createElement("div",{className:"row justify-content-between"},r.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 "},r.createElement("div",{className:"card"},r.createElement("div",{className:"card-header bg_themed"},r.createElement("div",{className:"row justify-content-between align-items-center p-2"},r.createElement("h3",null,"SalesTarget Reports"),r.createElement("div",null,r.createElement("div",{onClick:function(){return"sales_print_out",(e=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0")).document.write(document.getElementById("sales_print_out").innerHTML),e.document.close(),e.focus(),e.print(),void e.close();var e},className:"btn btn-primary btn-lg reports_btn ml-2"},"Print"),r.createElement("div",{className:"btn btn-success btn-lg reports_btn ml-2"},"Chart")))),r.createElement("div",{className:"card-content"},r.createElement("div",{className:"row justify-content-between"},r.createElement("div",{id:"sales_print_out",className:"col-lg-8 col-md-6 col-sm-12 col-xs-12 border-right"},w),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("center",null,r.createElement("h4",{className:"font-weight-bold"},"Select Period")),1==_?r.createElement("select",{className:"form-control",value:i,onChange:function(e){d(e.target.value),k(h,e.target.value)}},c.map((function(e,t){return r.createElement("option",{key:t,value:e.value},e.name)}))):r.createElement("div",null)),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Date From"),r.createElement("input",{className:"form-control",type:"date",tabIndex:"3",name:"date_from",value:h||"",onChange:function(e){y(e.target.value),1==_?k(e.target.value,i):v&&R(e.target.value,v)},dateformat:"yyyy-mm-dd",max:new Date})))))))))}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(8559);var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,a,l,i=(a=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(a);if(l){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).state={openSnackBar:!1,isError:null,responseMessage:"",snackPosition:{vertical:"top",horizontal:"center"},currentPage:1},t.closeSnackBar=t.closeSnackBar.bind(E(t)),t.setResponse=t.setResponse.bind(E(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.error,r=t.message;n!==e.error?this.setResponse(n):r!==e.message&&(201==r.status&&this.setState({currentPage:1}),this.setResponse(r))}},{key:"componentDidMount",value:function(){var e=(0,o.Z)(new Date);this.props.fetchSalesTargetReport(e)}},{key:"setResponse",value:function(e){var t=Object.keys(e.responseMessage)[0],n=e.responseMessage[t];n instanceof Array?this.setState({responseMessage:n[0],isError:e.isError,openSnackBar:!0}):this.setState({responseMessage:n,isError:e.isError,openSnackBar:!0})}},{key:"closeSnackBar",value:function(){this.setState({openSnackBar:!1})}},{key:"render",value:function(){var e=this.props,t=e.reportsReducer,n=e.fetchSalesTargetReport,a=e.fetchIndividualSalesManStatics,l=t.isLoading,o=t.sales_target_report,i=t.sales_men_reports,u=this.state,m=u.openSnackBar,p=u.isError,d=u.responseMessage,h=u.snackPosition,y=(u.currentPage,{isError:p,responseMessage:d,openSnackBar:m,snackPosition:h});return r.createElement("div",null,r.createElement(s.Z,{open:l}),r.createElement(f,{fetchSalesTargetReport:n,fetchIndividualSalesManStatics:a,reports:o,sales_men_reports:i}),r.createElement(c.Z,{values:y,closeSnackBar:this.closeSnackBar}))}}])&&y(t.prototype,n),u}(r.Component);const S=(0,a.$j)((function(e){return{auth:e.authReducer,reportsReducer:e.reportsReducer,error:e.errorsReducer,message:e.messagesReducer}}),{fetchSalesTargetReport:l.um,fetchIndividualSalesManStatics:l.Q_})(_)},36647:(e,t,n)=>{"use strict";n.d(t,{we:()=>s,qW:()=>i,ri:()=>u,um:()=>m,Q_:()=>p});var r=n(9669),a=n.n(r),l=n(34464),o=n(58343),c=n(66808),s=function(e,t){return function(n,r){n({type:c.z5});var s=(0,l.Z)(r);a().get("../retailer/api/order_statics/?from_date=".concat(e,"&to_date=").concat(t),s).then((function(e){n({type:c.IX,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,o.x)(t)),n({type:c.ah})}))}},i=function(e,t){return function(n,r){n({type:c.z5});var s=(0,l.Z)(r);a().get("../retailer/api/retailer_statics/?from_date=".concat(e,"&to_date=").concat(t),s).then((function(e){n({type:c.mp,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,o.x)(t)),n({type:c.ah})}))}},u=function(e,t){return function(n,r){n({type:c.z5});var s=(0,l.Z)(r);a().get("../retailer/api/dist_statics/?from_date=".concat(e,"&to_date=").concat(t),s).then((function(e){n({type:c.S$,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,o.x)(t)),n({type:c.ah})}))}},m=function(e,t){return function(n,r){n({type:c.z5});var s=(0,l.Z)(r),i=t?"../retailer/api/sales_group_statics/?from_date=".concat(e,"&period=").concat(t):"../retailer/api/sales_group_statics/?from_date=".concat(e);a().get(i,s).then((function(e){n({type:c.D4,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,o.x)(t)),n({type:c.ah})}))}},p=function(e,t){return function(n,r){n({type:c.z5});var s=(0,l.Z)(r);a().get("../retailer/api/sales_man_statics/?from_date=".concat(e,"&salegroup_id=").concat(t),s).then((function(e){n({type:c.N2,payload:e.data})})).catch((function(e){console.log(e);var t={responseMessage:e.response.data,status:e.response.status};n((0,o.x)(t)),n({type:c.ah})}))}}},68134:(e,t,n)=>{"use strict";function r(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}n.d(t,{Z:()=>r})},69688:(e,t,n)=>{"use strict";function r(e){var t=new Date(e),n=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),r=t.getMonth()+1,a=r<10?"0".concat(r):r;return t.getFullYear()+"-"+a+"-"+n}n.d(t,{Z:()=>r})},4157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(23645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".reports_btn {\n    border-radius: 10px;\n}\n\n.view_report_graph {\n    min-height: 500px;\n}\n\n.report_sales_round_img {\n    width: 75px;\n    height: 75px;\n    overflow: hidden;\n    border-radius: 10px;\n}\n\n.report_sales_round_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n",""]);const l=a},8559:(e,t,n)=>{"use strict";var r=n(93379),a=n.n(r),l=n(4157);a()(l.Z,{insert:"head",singleton:!1}),l.Z.locals}}]);