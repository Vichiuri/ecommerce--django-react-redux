(self.webpackChunkbiz_app=self.webpackChunkbiz_app||[]).push([[119],{53890:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ye});var r=n(67294),a=n(13835),o=n(76523),c=n(73288),l=n(6849),i=n(72714),s=n(15643);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t,n,a=e.photos,o=e.inputImage,c=e.viewImage,l=e.deleteImage,i=(t=(0,r.useState)(0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=i[0],d=i[1];return r.createElement("div",{className:"row m-2"},a.map((function(e,t){return r.createElement("div",{className:"col-lg-3 col-md-3 col-sm-4 col-xs-6 col-xs-6 image_card image_view_card",key:t},e?r.createElement("div",{className:"product_add_image_card_img"},r.createElement("img",{src:e,alt:""}),r.createElement("button",{className:"delete_btn",onClick:function(){return l(t)}},"x")):r.createElement("div",null))})),a.length>4?r.createElement("div",null):r.createElement("div",{className:"image_card image_add",onClick:function(){return m.click()}},r.createElement("input",{className:"image_input",type:"file",accept:"image/*",onChange:function(e){return function(e){var t=e.target.files[0];t&&(c(t),function(e){(0,s.Z)(e).then((function(e){o(e)})).catch((function(e){return console.log(e)}))}(t))}(e)},ref:function(e){return d(e)}}),r.createElement("img",{src:"../static/images/add_image.png",alt:""})))}var d=n(38109),p=n(65792),f=n.n(p);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=e.fetchCustomColors,n=e.customColors,a=e.colors,o=e.setColors,c="light",l=document.getElementsByTagName("body")[0],i={control:function(e){return v(v({},e),{},{backgroundColor:l.classList.contains(c)?"#ffffff":"#212529"})},menu:function(e){return v(v({},e),{},{backgroundColor:l.classList.contains(c)?"#ffffff":"#212529"})},option:function(e,t){var n=t.data,r=t.isDisabled,a=t.isFocused,o=t.isSelected,c=f()(n.color);return v(v({},e),{},{backgroundColor:r?null:o?n.color:a?c.alpha(.1).css():null,color:r?"#ccc":o?f().contrast(c,"white")>2?"white":"black":n.color,cursor:r?"not-allowed":"default",":active":v(v({},e[":active"]),{},{backgroundColor:!r&&(o?n.color:c.alpha(.3).css())})})},multiValue:function(e,t){var n=t.data,r=f()(n.color);return v(v({},e),{},{backgroundColor:r.alpha(.1).css()})},multiValueLabel:function(e,t){var n=t.data;return v(v({},e),{},{color:n.color})},multiValueRemove:function(e,t){var n=t.data;return v(v({},e),{},{color:n.color,":hover":{backgroundColor:n.color,color:"white"}})}};return r.createElement(d.ZP,{closeMenuOnSelect:!1,isMulti:!0,loadOptions:t,defaultOptions:n,cacheOptions:!0,styles:i,value:a,onChange:o})}var y=n(9669),E=n.n(y),w=n(79860),N=n(8719),P=n(23157),S=n(40074),x=n(35166),k=n(30553),_=n(70601);function C(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e){var t=e.changePage,n=e.setResponse,s=e.addProduct,u=Z((0,r.useState)(""),2),d=u[0],p=u[1],f=Z((0,r.useState)(""),2),g=f[0],v=f[1],b=Z((0,r.useState)(""),2),y=b[0],O=b[1],j=Z((0,r.useState)(null),2),M=j[0],A=j[1],I=Z((0,r.useState)([]),2),D=I[0],R=I[1],T=Z((0,r.useState)(0),2),z=T[0],U=T[1],B=Z((0,r.useState)(1),2),q=B[0],V=B[1],F=Z((0,r.useState)(""),2),J=F[0],L=F[1],H=Z((0,r.useState)(""),2),K=H[0],$=H[1],Q=Z((0,r.useState)([]),2),W=Q[0],Y=Q[1],G=Z((0,r.useState)([]),2),X=G[0],ee=G[1],te=Z((0,r.useState)(""),2),ne=te[0],re=te[1],ae=Z((0,r.useState)(""),2),oe=ae[0],ce=ae[1],le=Z((0,r.useState)(null),2),ie=le[0],se=le[1],ue=Z((0,r.useState)(""),2),me=ue[0],de=ue[1],pe=Z((0,r.useState)(null),2),fe=pe[0],ge=pe[1],ve=Z((0,r.useState)([]),2),be=ve[0],he=ve[1],ye=Z((0,r.useState)([]),2),Ee=ye[0],we=ye[1],Ne=Z((0,r.useState)(""),2),Pe=Ne[0],Se=Ne[1],xe=Z((0,r.useState)([]),2),ke=xe[0],_e=xe[1],Ce=Z((0,r.useState)([]),2),Ze=Ce[0],Oe=(Ce[1],Z((0,r.useState)(""),2)),je=Oe[0],Me=Oe[1],Ae=Z((0,r.useState)(""),2),Ie=Ae[0],De=Ae[1],Re=Z((0,r.useState)("active"),2),Te=Re[0],ze=Re[1];function Ue(e){var t=e?"../retailer/api/custom_colors/?query=".concat(e):"../retailer/api/custom_colors/",n={headers:{Accept:"application/json","Content-Type":"application/json"}};return new Promise((function(e,r){E().get(t,n).then((function(t){_e(t.data.colors),e(t.data.colors)})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};se(!0),de(t.responseMessage),r(e.responseMessage)}))}))}(0,r.useEffect)((function(){var e=a.Z.filter((function(e){return"KES"===e.cc}))[0];if(e){A(e);var t=a.Z.filter((function(t){return t.cc!=e.cc}));R([e].concat(C(t)))}else A(a.Z[0]),R(a.Z);Ue()}),[]);var Be={anchorEl:fe,popUpItems:D},qe={container:{border:"1px solid #ddd",padding:"5px",borderRadius:"5px"},items:{display:"inline-block",padding:"2px",border:"1px solid blue",fontFamily:"Helvetica, sans-serif",borderRadius:"5px",marginRight:"5px",cursor:"pointer",backgroundColor:"#1976d2",color:"white"},input:{outline:"none",border:"none",fontSize:"14px",fontFamily:"Helvetica, sans-serif"}};return r.createElement("div",{className:"row justify-content-center mt-2"},r.createElement("div",{className:"col-lg-12 col-md-11 col-sm-12 col-xs-12 p-2"},r.createElement("div",{className:"card"},r.createElement("div",{className:"card-header"},r.createElement("div",{className:"row justify-content-between ml-2 mr-2"},r.createElement(r.Fragment,null,r.createElement("h3",null,"Add Product")),r.createElement(c.Z,{prevPropsName:"Products",propsName:"Add Product",changePage:t}))),r.createElement("div",{className:"card-content"},r.createElement(o.Z,{isError:ie,responseMessage:me}),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group"},r.createElement("label",{className:""},"Product Name*"," ",r.createElement(_.Z,{message:"Enter your products' name"})),r.createElement("input",{type:"text",className:"form-control",placeholder:"Please input product name",name:"name",value:g,onChange:function(e){return v(e.target.value)},required:!0,autoFocus:!0})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group"},r.createElement("label",{className:""},"Code*"," ",r.createElement(_.Z,{message:"Used for API Intergration"})),r.createElement("input",{type:"text",className:"form-control",placeholder:"Please input product Code",name:"product_code",value:y,onChange:function(e){return O(e.target.value)},required:!0})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",null,"Select Category",r.createElement(_.Z,{message:"Choose a category which best fits your  product"})),r.createElement(w.Z,{isMulti:!1,value:d,setValue:function(e){return p(e)},fetchData:N.JD,closeMenuOnSelect:!0,isClearable:!0}))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group"},r.createElement("label",null,"Product Color ",r.createElement("small",null,"(Type for search)"),r.createElement(_.Z,{message:"Type, then select your colour"})),r.createElement(h,{fetchCustomColors:Ue,customColors:ke,colors:W,setColors:function(e){Y(e)}})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group"},r.createElement("label",null,"Product Sizes (Press enter to add)"," ",r.createElement(_.Z,{message:"Type the size, then press enter"})," "),r.createElement("div",null,r.createElement("label",{className:"row ml-1 mr-1"},r.createElement("ul",{style:qe.container,className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},X.map((function(e,t){return r.createElement("li",{key:t,style:qe.items,className:"mr-2",onClick:(n=t,function(){ee(X.filter((function(e,t){return t!==n})))})},e,r.createElement("span",null,r.createElement("i",{className:"fas fa-times ml-2 text-danger"})));var n})),r.createElement("input",{style:qe.input,value:ne,className:"bg_themed",onChange:function(e){re(e.target.value)},onKeyDown:function(e){if(13===e.keyCode){var t=e.target.value;ee([].concat(C(X),[t])),re("")}X.length&&8===e.keyCode&&!ne.length&&ee(X.slice(0,X.length-1))}}))))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group"},r.createElement("label",null,"Product Brands"," ",r.createElement(_.Z,{message:"Type the brand of your product"})," "),r.createElement(w.Z,{isMulti:!1,value:oe,setValue:function(e){return ce(e)},fetchData:N.$g,closeMenuOnSelect:!0,isClearable:!0}))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",null,"Select Units*"," ",r.createElement(_.Z,{message:"Select a unit which best fits your product"})," "),r.createElement(w.Z,{isMulti:!1,value:J,setValue:function(e){return L(e)},fetchData:N.Qf,closeMenuOnSelect:!0})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Price*"," ",r.createElement(_.Z,{message:"Type the price of your product"})),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"input-group"},r.createElement("div",{onClick:function(e){return ge(e.currentTarget)},className:"input-group-prepend"},r.createElement("span",{className:"input-group-text"},M?r.createElement("div",null,M.cc):r.createElement("div",null,"KSH ."),r.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),r.createElement("input",{type:"text",className:"form-control",value:z,onChange:function(e){return U(e.target.value)},placeholder:"Please input amount",required:!0}),r.createElement("div",{className:"input-group-append"},r.createElement("span",{className:"input-group-text"},".00"))))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12  form-group"},r.createElement("label",{className:"control-label"},"Product Stock Quantity*"," ",r.createElement(_.Z,{message:"Enter the product quantity"})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"text",className:"form-control",value:q,onChange:function(e){return V(e.target.value)},placeholder:"Please input stock quantity",required:!0})))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Type"," ",r.createElement(_.Z,{message:"Choose whether your product is new or not"})," "),r.createElement("div",{className:"form-group"},r.createElement(P.ZP,{value:je,isClearable:!0,onChange:function(e){return Me(e)},name:"type",options:[{value:"New",label:"New"},{value:"Existing",label:"Existing"}]}))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Weight"," ",r.createElement(_.Z,{message:"Type the weight of your product"})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"text",className:"form-control",value:Ie,onChange:function(e){return De(e.target.value)},placeholder:"Please input product weight",required:!0}))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12"},r.createElement("label",{className:"control-label"},"Product Status"," ",r.createElement(_.Z,{message:"Select the status of your product"})," "),r.createElement(x.Z,{row:!0,"aria-label":"Active",name:"active",value:Te,onChange:function(e){return ze(e.target.value)}},r.createElement(k.Z,{value:"active",control:r.createElement(S.Z,{color:"primary"}),label:"Active"}),r.createElement(k.Z,{value:"inactive",control:r.createElement(S.Z,{color:"primary"}),label:"Inactive",color:"primary"})))),r.createElement("div",{className:"border"},r.createElement("div",{className:"border-bottom"},r.createElement("h5",{className:"p-2"},"Images",r.createElement(_.Z,{message:"You can add a maximum of 5 product images"})," ")),r.createElement("div",{className:"card-content"},r.createElement(m,{photos:be,inputImage:function(e){we([].concat(C(Ee),[e]))},viewImage:function(e){var t=URL.createObjectURL(e);he([].concat(C(be),[t]))},deleteImage:function(e){var t=be.splice(e,1),n=Ee.splice(e,1),r=be.filter((function(e){return e!=t})),a=Ee.filter((function(e){return e!=n}));he(r),we(a)}}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12  form-group"},r.createElement("label",{className:"control-label"},"Brief description (Max. 250 Chars)*"," ",r.createElement(_.Z,{message:"Enter a brief description of your product"})),r.createElement("div",{className:"form-group"},r.createElement("textarea",{type:"text",rows:4,className:"form-control",value:Pe,onChange:function(e){e.target.value.length<=250?Se(e.target.value):n({isError:!0,responseMessage:{message:"Description cannot be more than 250 words"}})},placeholder:"Please input product brief description",required:!0})))),r.createElement("div",null,r.createElement("div",{className:"border"},r.createElement("h5",{className:"p-2"},"Product Description*"," ",r.createElement(_.Z,{message:"Add as much information as you want"})," ")),r.createElement(l.Z,{description:"",setDescription:function(e){$(e.target.getContent())}})),r.createElement("div",{className:"row justify-content-end"},r.createElement("div",{onClick:function(){return function(){if(se(null),de(""),g&&K&&z&&J){var e,t,r=new FormData;r.append("name",g),r.append("product_code",y),r.append("type",null==je?void 0:je.value),r.append("weight",Ie),r.append("active",Te),r.append("stock_qty",q),r.append("category_id",d?d.value.id:""),r.append("units_id",J?J.value.id:""),r.append("price",z),r.append("description",K);for(var a=0;a<Ee.length;a++)r.append("photos"+a,Ee[a]);var o=JSON.stringify(X),c=JSON.stringify(W.map((function(e){return e.id}))),l=JSON.stringify(Ze);r.append("colors",c),r.append("brand",null!==(e=null==oe||null===(t=oe.value)||void 0===t?void 0:t.id)&&void 0!==e?e:""),r.append("size",o),r.append("variations",l),r.append("brief_description",Pe),s(r)}else g?K?z?J?(se(!0),de("Please input all important fields"),n({isError:!0,responseMessage:{message:"Please input all important fields"}})):(se(!0),de("Please add unit for item"),n({isError:!0,responseMessage:{message:"Please add unit for item"}})):(se(!0),de("Please add price for item"),n({isError:!0,responseMessage:{message:"Please add price for item"}})):(se(!0),de("Please insert product description"),n({isError:!0,responseMessage:{message:"Please insert product description"}})):(se(!0),de("Please insert product name"),n({isError:!0,responseMessage:{message:"Please insert product name"}}))}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Add Product"))))),r.createElement(i.Z,{popUpValues:Be,handlePopUpClick:function(e){var t=a.Z.filter((function(t){return t.cc===e}))[0];if(t){A(t);var n=a.Z.filter((function(e){return e.cc!=t.cc}));R([t].concat(C(n)))}ge(null)},handlePopUp:function(e){return ge(fe?null:e.currentTarget)}}))}var A=n(32941),I=n(90482),D=n(68134),R=n(13258);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t=e.product,n=e.deleteProduct,a=e.editProduct,o=e.canManage,c=e.viewProductDescription,l=e.index,i=e.updateProductState,s=T((0,r.useState)("../static/images/user.png"),2),u=s[0],m=s[1],d=T((0,r.useState)([]),2),p=(d[0],d[1]),f=T((0,r.useState)([]),2),g=(f[0],f[1]),v=T((0,r.useState)(null),2),b=v[0],h=v[1];(0,r.useEffect)((function(){if(t.product_images&&m(null!=t.product_images[0]&&null!=t.product_images[0].image?"..".concat(t.product_images[0].image):"../static/images/logo.svg"),t.colors&&p(t.colors),t.size){var e=JSON.parse(t.size);g(e)}}),[t]);var y={anchorEl:b,popUpItems:[{icon:r.createElement("i",{className:"fas fa-eye btn_type"}),name:"View",value:"View"},{icon:r.createElement("i",{className:"fas fa-edit btn_type"}),name:"Edit",value:"Edit"},{icon:r.createElement("i",{className:"fas fa-trash btn_type"}),name:"Delete",value:"Delete"}]};return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("td",null,l+1),r.createElement("td",null,r.createElement("div",{onClick:function(){return c(t)},className:"col-md-3 mt-1 view_product_img btn_type"},r.createElement("img",{src:u,alt:"product image"}))),r.createElement("td",{onClick:function(){return c(t)},className:"btn_type"},t.name),r.createElement("td",null,t.product_code?t.product_code:""),r.createElement("td",null,t.category?t.category.name:""),r.createElement("td",null,t.brand?t.brand:""),r.createElement("td",{width:"10%"},"".concat(t.price_currency," ").concat((0,D.Z)(t.price))),r.createElement("td",null,t.stock_qty),r.createElement("td",null,t.units?"".concat(t.units.name," (").concat(t.units.symbol,")"):""),r.createElement("td",null,t.brief_description),r.createElement("td",null,r.createElement(R.Z,{checked:t.active,color:"primary",onChange:function(e){return i({id:t.id,active:e.target.checked})},inputProps:{"aria-label":"primary checkbox"}})),r.createElement("td",null,o?r.createElement("i",{onClick:function(e){return h(e.currentTarget)},className:"fas fa-ellipsis-h btn_type"}):r.createElement("div",null))),r.createElement(I.Z,{popUpValues:y,handlePopUpClick:function(e){"Delete"==e?n(t.id):"Edit"==e?a(t):"View"==e&&c(t),h(null)},handlePopUp:function(e){return h(b?null:e.currentTarget)}}))}var B=n(21539),q=n(41076),V=n(30653),F=n(68760);function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){var t=e.show,n=e.handleModal,a=e.product,o=e.editProduct,c=(e.changePage,J((0,r.useState)(""),2)),l=c[0],i=c[1],s=J((0,r.useState)([]),2),u=s[0],m=s[1],d=J((0,r.useState)(""),2),p=d[0],f=d[1],g=J((0,r.useState)(0),2),v=g[0],b=g[1],h=J((0,r.useState)(""),2),y=h[0],E=h[1],w=J((0,r.useState)(""),2),N=w[0],P=w[1],S=J((0,r.useState)(""),2),x=S[0],k=S[1],_=J((0,r.useState)([]),2),C=_[0],Z=_[1],O=J((0,r.useState)([]),2),j=O[0],M=O[1];return(0,r.useEffect)((function(){var e,t;if(a&&(i(null!=a.product_images[0]&&null!=a.product_images[0].image?a.product_images[0].image:""),m(a.product_images),b("".concat(a.price_currency," ").concat((0,D.Z)(a.price))),E(null!==(e=null==a||null===(t=a.branding)||void 0===t?void 0:t.name)&&void 0!==e?e:""),Z(a.colors),P(a.brief_description),k((0,V.ZP)(a.description)),f(a.name),a.size)){var n=JSON.parse(a.size);M(n)}}),[a]),r.createElement(F.Z,{show:t,onHide:n,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.createElement(F.Z.Header,{className:"card-header bg_themed",closeButton:!0},r.createElement(F.Z.Title,{id:"contained-modal-title-vcenter"},"View Description")),r.createElement(F.Z.Body,{className:"card-content bg_themed"},r.createElement("div",{className:"product-view-description"},r.createElement("div",{className:"container-fluid"},r.createElement("div",{className:"row"},r.createElement("div",{className:"preview col-md-6"},r.createElement("div",{className:"preview-pic tab-content row justify-content-center"},r.createElement("div",{className:"view_prod_description_img tab-pane active",id:"pic-1"},r.createElement("img",{src:"..".concat(l)}))),r.createElement("ul",{className:"preview-thumbnail nav nav-tabs"},u.map((function(e,t){return r.createElement("li",{onClick:function(){return i(e.image)},key:t,className:l==e.image?"active":""},r.createElement("a",{"data-target":"#pic-1","data-toggle":"tab"},r.createElement("img",{src:"..".concat(e.image)})))})))),r.createElement("div",{className:"details col-md-6"},r.createElement("h3",{className:"mt-2 product-title"},p),r.createElement("h4",{className:"price"},"current price: ",r.createElement("span",null,v)),r.createElement("p",{className:"vote"},r.createElement("strong",null,"Brand: ")," ",y),r.createElement("h5",{className:"sizes"},"Sizes:",j.map((function(e,t){return r.createElement("span",{key:t,className:"size","data-toggle":"tooltip",title:"medium"},e,",")}))),r.createElement("h5",{className:"colors"},"Colors:",C.map((function(e,t){var n=e.color;return r.createElement("span",{className:"color",style:{background:n},"data-toggle":"tooltip",key:t})}))),r.createElement("div",null,r.createElement("p",{className:"mt-1 mb-2"},N)),r.createElement("div",{className:"action"},r.createElement("button",{onClick:function(){return n(),void o(a)},className:"add-to-cart btn btn-primary",type:"button"},"Edit Product"))))),r.createElement("div",{className:"row justify-content-start border-bottom mt-4"},r.createElement("h3",{className:"ml-4 font-weight-bold"},"Description")),r.createElement("p",{className:"product-description mt-2"},x))))}var K=n(2376);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){var t=e.changePage,n=e.products,a=e.deleteProduct,o=e.editProduct,c=e.canManage,l=e.pageDetails,i=e.fetchProducts,s=e.updateProductState,u=$((0,r.useState)(""),2),m=u[0],d=u[1],p=$((0,r.useState)(25),2),f=p[0],g=p[1],v=$((0,r.useState)(null),2),b=v[0],h=v[1],y=$((0,r.useState)(),2),E=y[0],w=y[1];function N(e){w(!0),h(e)}return r.createElement("div",{className:"row justify-content-between"},r.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},r.createElement("div",{className:"bg_themed container-fluid"},r.createElement("div",{className:"row justify-content-between align-items-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 form-group p-1"},r.createElement("div",{className:"input-group"},r.createElement("input",{type:"text",className:"form-control border-right-0 ",value:m,onChange:function(e){return d(e.target.value)},onKeyUp:(0,A.Z)((function(){i(1,"",m||"",f)}),2e3),placeholder:"Search"}),r.createElement("span",{className:"input-group-text border-left-0"},r.createElement("i",{className:"ml-1 fas fa-search"})))),r.createElement("div",null,c?r.createElement("div",{onClick:function(){return t(2)},className:"btn btn-primary btn-lg table_menu_btn mr-3"},"Add Product"):r.createElement("div",null))),r.createElement("div",{className:"row col-lg-12 col-md-12 col-sm-12 col-xs-12"},r.createElement(B.Z,{"aria-label":"collapsible "},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null),r.createElement("th",null,"Name"),r.createElement("th",null,"Code"),r.createElement("th",null,"Category"),r.createElement("th",null,"Brand"),r.createElement("th",{className:"row justify-content-end mr-1"},r.createElement("i",{className:"fas fa-sort mr-2"}),"Price"),r.createElement("th",null,"Stock"),r.createElement("th",null,"Unit"),r.createElement("th",null,"Description"),r.createElement("th",null,"Active"),r.createElement("th",null,"Actions"))),r.createElement(q.Z,null,n.map((function(e,t){return r.createElement(U,{key:t,index:t,product:e,deleteProduct:a,editProduct:o,canManage:c,viewProductDescription:N,updateProductState:s})})))),l.last_page&&l.last_page>1?r.createElement(K.Z,{rows:f,changeRows:function(e){i(1,"",m,e),g(e)},pageDetails:l,changePage:function(e){i(e,"",m,f)}}):r.createElement("div",null)))),r.createElement(H,{show:E,handleModal:function(){return w(!E)},product:b,editProduct:o}))}var Y=n(93379),G=n.n(Y),X=n(34988);G()(X.Z,{insert:"head",singleton:!1}),X.Z.locals;var ee=n(37703),te=n(42905),ne=n(8295);function re(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e){var t=e.changePage,n=(e.categories,e.units,e.setResponse),s=e.updateProduct,u=e.product,p=[{value:"New",label:"New"},{value:"Existing",label:"Existing"}],g=le((0,r.useState)(""),2),v=g[0],b=g[1],h=le((0,r.useState)(u.name),2),y=h[0],C=h[1],Z=le((0,r.useState)(null),2),O=Z[0],j=Z[1],M=le((0,r.useState)([]),2),A=M[0],I=M[1],D=le((0,r.useState)(u.price),2),R=D[0],T=D[1],z=le((0,r.useState)(u.stock_qty),2),U=z[0],B=z[1],q=le((0,r.useState)(""),2),V=q[0],F=q[1],J=le((0,r.useState)(u.description?u.description:""),2),L=J[0],H=J[1],K=le((0,r.useState)([]),2),$=K[0],Q=K[1],W=le((0,r.useState)([]),2),Y=W[0],G=W[1],X=le((0,r.useState)(""),2),ee=X[0],te=X[1],ne=le((0,r.useState)(""),2),ae=ne[0],ce=ne[1],ie=le((0,r.useState)(null),2),se=ie[0],ue=ie[1],me=le((0,r.useState)(""),2),de=me[0],pe=me[1],fe=le((0,r.useState)(u.brief_description),2),ge=fe[0],ve=fe[1],be=le((0,r.useState)(null),2),he=be[0],ye=be[1],Ee=le((0,r.useState)([]),2),we=Ee[0],Ne=Ee[1],Pe=le((0,r.useState)([]),2),Se=Pe[0],xe=Pe[1],ke=le((0,r.useState)([]),2),_e=ke[0],Ce=ke[1],Ze=le((0,r.useState)([]),2),Oe=Ze[0],je=Ze[1],Me=le((0,r.useState)([]),2),Ae=Me[0],Ie=(Me[1],le((0,r.useState)(u.is_new_arrival?p[0]:p[1]),2)),De=Ie[0],Re=Ie[1],Te=le((0,r.useState)(u.weight),2),ze=Te[0],Ue=Te[1],Be=le((0,r.useState)(u.active?"active":"inactive"),2),qe=Be[0],Ve=Be[1],Fe=le((0,r.useState)(u.product_code),2),Je=Fe[0],Le=Fe[1],He={control:function(e){return oe(oe({},e),{},{backgroundColor:"white"})},option:function(e,t){var n=t.data,r=t.isDisabled,a=t.isFocused,o=t.isSelected,c=f()(n.color);return oe(oe({},e),{},{backgroundColor:r?null:o?n.color:a?c.alpha(.1).css():null,color:r?"#ccc":o?f().contrast(c,"white")>2?"white":"black":n.color,cursor:r?"not-allowed":"default",":active":oe(oe({},e[":active"]),{},{backgroundColor:!r&&(o?n.color:c.alpha(.3).css())})})},multiValue:function(e,t){var n=t.data,r=f()(n.color);return oe(oe({},e),{},{backgroundColor:r.alpha(.1).css()})},multiValueLabel:function(e,t){var n=t.data;return oe(oe({},e),{},{color:n.color})},multiValueRemove:function(e,t){var n=t.data;return oe(oe({},e),{},{color:n.color,":hover":{backgroundColor:n.color,color:"white"}})}};function Ke(e){var t=e?"../retailer/api/custom_colors/?query=".concat(e):"../retailer/api/custom_colors/",n={headers:{Accept:"application/json","Content-Type":"application/json"}};return new Promise((function(e,r){E().get(t,n).then((function(t){je(t.data.colors),e(t.data.colors)})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};ue(!0),pe(t.responseMessage),r(e.responseMessage)}))}))}(0,r.useEffect)((function(){var e=a.Z.filter((function(e){return"KES"===e.cc}))[0];if(u.units){var t={value:u.units,label:u.units.name};F(t)}if(u.category){var n={value:u.category,label:u.category.name};b(n)}if(e){j(e);var r=a.Z.filter((function(t){return t.cc!=e.cc}));I([e].concat(re(r)))}else j(a.Z[0]),I(a.Z);if(u.product_images){for(var o=[],c=0;c<u.product_images.length;c++){var l=u.product_images[c];o.push({image:"..".concat(l.image),id:l.id})}Ne(o)}if(u.colors&&Q(u.colors),u.size){var i=JSON.parse(u.size);G(i)}if(u.branding){var s,m={value:null==u?void 0:u.branding,label:null==u||null===(s=u.branding)||void 0===s?void 0:s.name};ce(null!=m?m:"")}Ke()}),[u]);var $e={anchorEl:he,popUpItems:A},Qe={container:{border:"1px solid #ddd",padding:"5px",borderRadius:"5px"},items:{display:"inline-block",padding:"2px",border:"1px solid blue",fontFamily:"Helvetica, sans-serif",borderRadius:"5px",marginRight:"5px",cursor:"pointer",backgroundColor:"#1976d2",color:"white"},input:{outline:"none",border:"none",fontSize:"14px",fontFamily:"Helvetica, sans-serif"}};return r.createElement("div",{className:"row justify-content-center mt-2"},r.createElement("div",{className:"col-lg-12 col-md-11 col-sm-12 col-xs-12 p-2"},r.createElement("div",{className:"card"},r.createElement("div",{className:"card-header"},r.createElement("div",{className:"row justify-content-between ml-2 mr-2"},r.createElement("center",null,r.createElement("h3",null,"Edit Product")),r.createElement(c.Z,{prevPropsName:"Products",propsName:"Edit Product",changePage:t}))),r.createElement("div",{className:"card-content"},r.createElement(o.Z,{isError:se,responseMessage:de}),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12 col-xs-12 form-label-group mt-2"},r.createElement("label",null,"Product Name*"," ",r.createElement(_.Z,{message:"Enter yourproducts' name"})),r.createElement("input",{type:"text",className:"form-control",placeholder:"Please input product name",name:"name",value:y,onChange:function(e){return C(e.target.value)},required:!0,autoFocus:!0})),r.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12 col-xs-12 form-label-group mt-2"},r.createElement("label",null,"Code*"," ",r.createElement(_.Z,{message:"Used for API Intergration"})),r.createElement("input",{type:"text",className:"form-control",placeholder:"Please input product code",name:"code",value:Je,onChange:function(e){return Le(e.target.value)},required:!0})),r.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12 col-xs-12 form-group  mt-2"},r.createElement("label",null,"Select Category"," ",r.createElement(_.Z,{message:"Choose a category which best fits your  product"})," "),r.createElement(w.Z,{isMulti:!1,value:v,setValue:function(e){return b(e)},fetchData:N.JD,closeMenuOnSelect:!0,isClearable:!0}))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group mt-2"},r.createElement("label",null,"Product Color"," ",r.createElement("small",null,"(Type for search)"," ",r.createElement(_.Z,{message:"Type, then select your colour"})," ")),r.createElement(d.ZP,{closeMenuOnSelect:!1,isMulti:!0,loadOptions:Ke,defaultOptions:Oe,cacheOptions:!0,styles:He,value:$,onChange:function(e){return Q(e)}})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group mt-2"},r.createElement("label",null,"Product Sizes (Press enter to add)"," ",r.createElement(_.Z,{message:"Type the size, then press enter"})," "),r.createElement("div",null,r.createElement("label",{className:"row ml-1 mr-1"},r.createElement("ul",{style:Qe.container,className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},Y.map((function(e,t){return r.createElement("li",{key:t,style:Qe.items,className:"mr-2",onClick:(n=t,function(){G(Y.filter((function(e,t){return t!==n})))})},e,r.createElement("span",null,r.createElement("i",{className:"fas fa-times ml-2 text-danger"})));var n})),r.createElement("input",{style:Qe.input,value:ee,className:"bg_themed",onChange:function(e){te(e.target.value)},onKeyDown:function(e){if(13===e.keyCode){var t=e.target.value;G([].concat(re(Y),[t])),te("")}Y.length&&8===e.keyCode&&!ee.length&&G(Y.slice(0,Y.length-1))}}))))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-label-group mt-2"},r.createElement("label",null,"Product Brands"," ",r.createElement(_.Z,{message:"Type the brand of your product"})," "),r.createElement(w.Z,{isMulti:!1,value:ae,setValue:function(e){return ce(e)},fetchData:N.$g,closeMenuOnSelect:!0,isClearable:!0}))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",null,"Select Units*"," ",r.createElement(_.Z,{message:"Select a unit which best fits your product"})," "),r.createElement(w.Z,{isMulti:!1,value:V,setValue:function(e){return F(e)},fetchData:N.Qf,closeMenuOnSelect:!0})),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Price*"," ",r.createElement(_.Z,{message:"Type the price of your product"})),r.createElement("div",{className:"form-group"},r.createElement("div",{className:"input-group mb-3"},r.createElement("div",{onClick:function(e){return ye(e.currentTarget)},className:"input-group-prepend"},r.createElement("span",{className:"input-group-text btn_type"},O?r.createElement("div",null,O.cc):r.createElement("div",null,"KSH ."),r.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),r.createElement("input",{type:"text",className:"form-control",value:R,onChange:function(e){return T(e.target.value)},placeholder:"Please input amount",required:!0}),r.createElement("div",{className:"input-group-append"},r.createElement("span",{className:"input-group-text"},".00"))))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12  form-group"},r.createElement("label",{className:"control-label"},"Product Stock Quantity*"," ",r.createElement(_.Z,{message:"Enter the product quantity"})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"text",className:"form-control",value:U,onChange:function(e){return B(e.target.value)},placeholder:"Please input stock quantity",required:!0})))),r.createElement("div",{className:"row justify-content-between align-content-center"},r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Type"," ",r.createElement(_.Z,{message:"Choose whether your product is new or not"})),r.createElement("div",{className:"form-group"},r.createElement(P.ZP,{value:De,isClearable:!0,onChange:function(e){return Re(e)},name:"type",options:p}))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12 form-group"},r.createElement("label",{className:"control-label"},"Product Weight"," ",r.createElement(_.Z,{message:"Type the weight of your product"})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"text",className:"form-control",value:ze,onChange:function(e){return Ue(e.target.value)},placeholder:"Please input product weight",required:!0}))),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12"},r.createElement("label",{className:"control-label"},"Product Status"," ",r.createElement(_.Z,{message:"Select the status of your product"})),r.createElement(x.Z,{row:!0,"aria-label":"Active",name:"active",value:qe,onChange:function(e){return Ve(e.target.value)}},r.createElement(k.Z,{value:"active",control:r.createElement(S.Z,{color:"primary"}),label:"Active"}),r.createElement(k.Z,{value:"inactive",control:r.createElement(S.Z,{color:"primary"}),label:"Inactive",color:"primary"})))),r.createElement("div",{className:"border"},r.createElement("div",{className:"border-bottom"},r.createElement("h5",{className:"p-2"},"Images"," ",r.createElement(_.Z,{message:"You can add a maximum of 5 product images"}))),r.createElement("div",{className:"card-content"},r.createElement(m,{photos:we.map((function(e){return e.image})),inputImage:function(e){xe([].concat(re(Se),[e]))},viewImage:function(e){var t=URL.createObjectURL(e);Ne([].concat(re(we),[{image:t}]))},deleteImage:function(e){var t=we.splice(e,1)[0],n=Se.splice(e,1)[0];t.id&&Ce([].concat(re(_e),[t.id]));var r=we.filter((function(e){return e!=t})),a=Se.filter((function(e){return e!=n}));Ne(r),xe(a)}}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12  form-group"},r.createElement("label",{className:"control-label"},"Brief description(250)*"," ",r.createElement(_.Z,{message:"Enter a brief description of your product"})),r.createElement("div",{className:"form-group"},r.createElement("textarea",{type:"text",rows:4,className:"form-control",value:ge,onChange:function(e){e.target.value.length<=250?ve(e.target.value):n({isError:!0,responseMessage:{message:"Description cannot be more than 250 words"}})},placeholder:"Please input product brief description",required:!0})))),r.createElement("div",null,r.createElement("div",{className:"border"},r.createElement("h5",{className:"p-2"},"Product Description*"," ",r.createElement(_.Z,{message:"Add as much information as you want"}))),r.createElement(l.Z,{description:u.description?u.description:"",setDescription:function(e){H(e.target.getContent())}})),r.createElement("div",{className:"row justify-content-end"},r.createElement("div",{onClick:function(){return function(){if(ue(null),pe(""),y&&L&&R&&V&&Je){var e,t,r=new FormData;r.append("name",y),r.append("category_id",v?v.value.id:""),r.append("qty",U),r.append("unit_id",V?V.value.id:""),r.append("price",R),r.append("description",L),r.append("id",u.id),r.append("type",null==De?void 0:De.value),r.append("weight",ze),r.append("active",qe),r.append("product_code",Je);for(var a=0;a<Se.length;a++)r.append("photos"+a,Se[a]);var o=JSON.stringify(Y),c=JSON.stringify(Ae),l=JSON.stringify($.map((function(e){return e.id}))),i=JSON.stringify(_e);r.append("colors",l),r.append("brand",null!==(e=null==ae||null===(t=ae.value)||void 0===t?void 0:t.id)&&void 0!==e?e:""),r.append("size",o),r.append("variations",c),r.append("deletedImages",i),r.append("brief_description",ge),s(r)}else y?V?L?v?R?(ue(!0),pe("Please input all important fields"),n({isError:!0,responseMessage:{message:"Please input all important fields"}})):(ue(!0),pe("Please add price for item"),n({isError:!0,responseMessage:{message:"Please add price for item"}})):(ue(!0),pe("Please insert product category"),n({isError:!0,responseMessage:{message:"Please insert product category"}})):(ue(!0),pe("Please insert product description"),n({isError:!0,responseMessage:{message:"Please insert product description"}})):(ue(!0),pe("Please add unit for item"),n({isError:!0,responseMessage:{message:"Please add unit for item"}})):(ue(!0),pe("Please insert product name"),n({isError:!0,responseMessage:{message:"Please insert product name"}}))}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Save Product"))))),r.createElement(i.Z,{popUpValues:$e,handlePopUpClick:function(e){var t=a.Z.filter((function(t){return t.cc===e}))[0];if(t){j(t);var n=a.Z.filter((function(e){return e.cc!=t.cc}));I([t].concat(re(n)))}ye(null)},handlePopUp:function(e){return ye(he?null:e.currentTarget)}}))}var me=n(29130);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(l,e);var t,n,a,o,c=(a=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(a);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={openSnackBar:!1,isError:null,responseMessage:"",snackPosition:{vertical:"top",horizontal:"center"},currentPage:1,productItem:null},t.closeSnackBar=t.closeSnackBar.bind(ve(t)),t.setResponse=t.setResponse.bind(ve(t)),t.changePage=t.changePage.bind(ve(t)),t.editProduct=t.editProduct.bind(ve(t)),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.error,r=t.message;n!==e.error?this.setResponse(n):r!==e.message&&(201==r.status&&this.setState({currentPage:1}),this.setResponse(r))}},{key:"componentDidMount",value:function(){this.props.fetchProducts(1)}},{key:"changePage",value:function(e){this.setState({currentPage:e})}},{key:"editProduct",value:function(e){this.props.fetchCategories(),this.props.fetchProductUnits(),this.setState({currentPage:3,productItem:e})}},{key:"setResponse",value:function(e){var t=Object.keys(e.responseMessage)[0],n=e.responseMessage[t];n instanceof Array?this.setState({responseMessage:n[0],isError:e.isError,openSnackBar:!0}):this.setState({responseMessage:n,isError:e.isError,openSnackBar:!0})}},{key:"closeSnackBar",value:function(){this.setState({openSnackBar:!1})}},{key:"render",value:function(){var e=this.props,t=e.productsReducer,n=e.updateProduct,a=e.addProduct,o=e.deleteProduct,c=e.auth,l=e.searchProducts,i=e.fetchPaginatedProducts,s=e.fetchProducts,u=e.updateProductState,m=t.products,d=t.isLoading,p=t.categories,f=t.units,g=t.products_current_page,v=t.products_last_page,b=this.state,h=b.openSnackBar,y=b.isError,E=b.responseMessage,w=b.snackPosition,N=b.currentPage,P=b.productItem,S={isError:y,responseMessage:E,openSnackBar:h,snackPosition:w};if(!c.group.permission.can_view_products)return(0,me.Z)(this.props.auth.group.permission);var x={current_page:g,last_page:v};switch(N){case 1:return r.createElement("div",null,r.createElement(te.Z,{open:d}),r.createElement(W,{changePage:this.changePage,products:m,deleteProduct:o,editProduct:this.editProduct,canManage:c.group.permission.can_manage_product,searchProducts:l,fetchPaginatedProducts:i,pageDetails:x,fetchProducts:s,updateProductState:u}),r.createElement(ne.Z,{values:S,closeSnackBar:this.closeSnackBar}));case 2:return r.createElement("div",null,r.createElement(te.Z,{open:d}),r.createElement(M,{changePage:this.changePage,setResponse:this.setResponse,addProduct:a}),r.createElement(ne.Z,{values:S,closeSnackBar:this.closeSnackBar}));case 3:return r.createElement("div",null,r.createElement(te.Z,{open:d}),r.createElement(ue,{changePage:this.changePage,units:f,categories:p,setResponse:this.setResponse,updateProduct:n,product:P}),r.createElement(ne.Z,{values:S,closeSnackBar:this.closeSnackBar}));default:return r.createElement("div",null,r.createElement(te.Z,{open:d}),r.createElement(W,{changePage:this.changePage,products:m,searchProduct}),r.createElement(ne.Z,{values:S,closeSnackBar:this.closeSnackBar}))}}}])&&pe(t.prototype,n),l}(r.Component);const ye=(0,ee.$j)((function(e){return{auth:e.authReducer,productsReducer:e.productsReducer,error:e.errorsReducer,message:e.messagesReducer}}),{fetchProducts:N.t2,fetchCategories:N.pE,fetchProductUnits:N.sP,addProduct:N.gK,updateProduct:N.nM,deleteProduct:N.Ir,searchProducts:N.s3,fetchPaginatedProducts:N.rp,updateProductState:N.Jz})(he)},15643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o}),n(76770);var r=n(98005),a=n.n(r);function o(e){return new Promise((function(t,n){new(a())(e,{quality:1,success:function(e){var n=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<10;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}(),r=new File([e],"".concat(n,".png"),{type:"image/png",lastModified:(new Date).getTime()});t(r)},error:function(e){n(e)}})}))}},6849:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294),a=n(15074);function o(e){var t=e.description,n=e.setDescription,o="light",c=document.getElementsByTagName("body")[0];return r.createElement(a.M,{initialValue:t,init:{plugins:"autolink link image lists print preview",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | fontsizeselect  fontselect sizeselect ",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",width:"100%",height:"500px",skin:c.classList.contains(o)?"":"oxide-dark",content_css:c.classList.contains(o)?"":"dark"},onChange:function(e){return n(e)}})}},34988:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(23645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,'.ratings i {\n    font-size: 16px;\n    color: red;\n}\n\n.strike-text {\n    color: red;\n    text-decoration: line-through;\n}\n\n.view_product_img {\n    width: 80px;\n    height: 80px;\n    /* overflow: hidden; */\n    border-radius: 10px;\n    margin-right: 10px;\n}\n\n.view_product_img img {\n    width: inherit;\n    height: inherit;\n    object-fit: contain;\n}\n\n.product_dot {\n    height: 7px;\n    width: 7px;\n    margin-left: 6px;\n    margin-right: 6px;\n    margin-top: 3px;\n    background-color: blue;\n    border-radius: 50%;\n    display: inline-block;\n}\n\n.spec-1 {\n    color: #938787;\n    font-size: 15px;\n}\n\nh5 {\n    font-weight: 400;\n}\n\n.para {\n    font-size: 16px;\n}\n\n.image_view_card {\n    margin-bottom: 30px;\n    cursor: pointer;\n    overflow: hidden;\n    display: flex;\n    position: relative;\n}\n\n.image_view_card img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.image_add {\n    height: 200px;\n    width: 200px;\n    color: black;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.image_add img {\n    margin: 0px;\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n}\n\n.image_view_card .delete_btn {\n    /* float: right; */\n    cursor: pointer;\n    background-color: #e74c3c;\n    border: 0;\n    color: #fff;\n    font-size: 20px;\n    line-height: 20px;\n    /* padding: 2px 5px; */\n    transform: (-100%, -100%);\n    position: absolute;\n    top: 0;\n    right: 0;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n}\n\n.image_view_card:hover .delete_btn {\n    opacity: 1;\n}\n\n.add_color_input {\n    background: transparent;\n    border: none;\n}\n\n.product_description {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    /* number of lines to show */\n    -webkit-box-orient: vertical;\n}\n\n\n/* ! Product view page */\n\n\n/* .product-view-description img {\n    max-width: 100%; \n}\n   */\n\n.product-view-description .preview {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n}\n\n@media screen and (max-width: 996px) {\n    .preview {\n        margin-bottom: 20px;\n    }\n}\n\n.product-view-description .preview-pic {\n    -webkit-box-flex: 1;\n    -webkit-flex-grow: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n}\n\n.product-view-description .view_prod_description_img {\n    width: 300px;\n    height: 300px;\n    overflow: hidden;\n    align-self: center;\n}\n\n.product-view-description .view_prod_description_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n.product-view-description .preview-thumbnail.nav-tabs {\n    border: none;\n    margin-top: 15px;\n}\n\n.product-view-description .preview-thumbnail.nav-tabs li {\n    width: 18%;\n    margin-right: 2.5%;\n}\n\n.product-view-description .preview-thumbnail.nav-tabs li img {\n    max-width: 100%;\n    display: block;\n}\n\n.product-view-description .preview-thumbnail.nav-tabs li a {\n    padding: 0;\n    margin: 0;\n}\n\n.product-view-description .preview-thumbnail.nav-tabs li:last-of-type {\n    margin-right: 0;\n}\n\n.product-view-description .tab-content {\n    overflow: hidden;\n}\n\n.product-view-description .tab-content img {\n    width: 100%;\n    -webkit-animation-name: opacity;\n    animation-name: opacity;\n    -webkit-animation-duration: 0.3s;\n    animation-duration: 0.3s;\n}\n\n.product-view-description .card {\n    /* background: #eee; */\n    padding: 3em;\n    line-height: 1.5em;\n}\n\n@media screen and (min-width: 997px) {\n    .product-view-description .wrapper {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        display: flex;\n    }\n}\n\n.product-view-description .details {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n}\n\n.product-view-description .colors {\n    -webkit-box-flex: 1;\n    -webkit-flex-grow: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n}\n\n.product-view-description .product-title,\n.price,\n.sizes,\n.colors {\n    text-transform: UPPERCASE;\n    font-weight: bold;\n}\n\n.product-view-description .checked,\n.price span {\n    color: #ff9f1a;\n}\n\n.product-view-description .product-title,\n.rating,\n.product-description,\n.price,\n.vote,\n.sizes {\n    margin-bottom: 15px;\n}\n\n.product-view-description .product-description {\n    text-indent: 50px;\n    text-align: justify;\n}\n\n.product-view-description .product-title {\n    margin-top: 0;\n}\n\n.product-view-description .size {\n    margin-right: 10px;\n}\n\n.size:first-of-type {\n    margin-left: 40px;\n}\n\n.product-view-description .color {\n    display: inline-block;\n    vertical-align: middle;\n    margin-right: 10px;\n    height: 2em;\n    width: 2em;\n    border-radius: 1em;\n}\n\n.color:first-of-type {\n    margin-left: 20px;\n}\n\n.product-view-description .add-to-cart,\n.like {\n    padding: 1.2em 1.5em;\n    border: none;\n    text-transform: UPPERCASE;\n    font-weight: bold;\n    color: #fff;\n    -webkit-transition: background 0.3s ease;\n    transition: background 0.3s ease;\n}\n\n.add-to-cart:hover,\n.like:hover {\n    color: #fff;\n}\n\n.product-view-description .not-available {\n    text-align: center;\n    line-height: 2em;\n}\n\n.product-view-description .not-available:before {\n    font-family: fontawesome;\n    content: "\\f00d";\n    color: #fff;\n}\n\n.product-view-description .tooltip-inner {\n    padding: 1.3em;\n}\n\n@-webkit-keyframes opacity {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(3);\n        transform: scale(3);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1);\n        transform: scale(1);\n    }\n}\n\n@keyframes opacity {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(3);\n        transform: scale(3);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1);\n        transform: scale(1);\n    }\n}',""]);const o=a},50247:()=>{}}]);