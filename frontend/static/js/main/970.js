(self.webpackChunkbiz_app=self.webpackChunkbiz_app||[]).push([[970],{35970:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(67294),a=n(37703),o=n(36647),c=n(42905),s=n(8295),i=n(69688),l=(n(8559),n(68134));function u(e){var t=new Date(e),n=t.getMonth(),r=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1;r<0&&(r=6);var a=t.getDate()+r-1;return Math.floor(a/7)+" week of "+["January","February","March","April","May","June","July","August","September","October","November","December"][n]}var p=n(73272);function d(e){var t=e.period,n=e.reports;return r.createElement(r.Fragment,null,r.createElement("div",{className:"row justify-content-end"},r.createElement("div",{className:"badge badge-primary btn_type mr-2 mb-2"},t)),r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Date"),r.createElement("th",null,"Aproved Orders"),r.createElement("th",null,"Sold Products"),r.createElement("th",{className:"row justify-content-end"},"Total revenue"),r.createElement("th",null))),r.createElement("tbody",null,n?n.map((function(e,n){return r.createElement("tr",{key:n},r.createElement("td",null,"Daily"==t?(0,p.Z)(e.date):"Weekly"==t?u(e.date):"Monthly"==t?function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]}(e.date):e.date),r.createElement("td",null,e.count," "),r.createElement("td",null,e.product_count),r.createElement("td",{className:"row justify-content-end"},"Ksh. ",(0,l.Z)(e.revenue_count)),r.createElement("td",null,"   "))})):r.createElement("div",null))))}var m=n(79129),f=n(69259),y=n.n(f),h=n(34925);function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){var t,n,a=e.reports,o=e.period,c=(t=(0,r.useState)("Line"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(t,n)||b(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],i=(c[1],{data:{labels:"Daily"==o?a.map((function(e){return(0,m.Pz)(e.date)})):"Weekly"==o?a.map((function(e){return u(e.date)})):"Monthly"==o?a.map((function(e){return(0,m.kQ)(e.date)})):a.map((function(e){return e.date})),series:[a.map((function(e){return e.count}))]},options:{lineSmooth:y().Interpolation.cardinal({tension:0}),height:400,low:0,high:Math.max.apply(Math,v(a.map((function(e){return e.count}))))+20,chartPadding:{top:0,right:0,bottom:0,left:0}},animation:{draw:function(e){"line"===e.type||"area"===e.type?e.element.animate({d:{begin:600,dur:700,from:e.path.clone().scale(1,0).translate(0,e.chartRect.height()).stringify(),to:e.path.clone().stringify(),easing:y().Svg.Easing.easeOutQuint}}):"point"===e.type&&e.element.animate({opacity:{begin:80*(e.index+1),dur:500,from:0,to:1,easing:"ease"}})}}});return r.createElement("div",null,r.createElement("div",{className:"row justify-content-end"}),r.createElement("div",{className:"card-header card_header_success"},r.createElement(h.Z,{data:i.data,type:s,options:i.options,listener:i.animation})),r.createElement("div",{className:"card-content"},r.createElement("h4",null,"Approved Orders"),r.createElement("div",{className:"row justify-content-between pl-3 pr-3 btn_type"},r.createElement("p",null,o))))}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=e.reports,n=e.fetchOrdersStatics,a=["Daily","Weekly","Monthly","Yearly"],o=w((0,r.useState)(a[0]),2),c=o[0],s=o[1],l=w((0,r.useState)((0,i.Z)((new Date).setDate((new Date).getDate()-6))),2),u=l[0],p=l[1],m=w((0,r.useState)((0,i.Z)((new Date).setDate((new Date).getDate()))),2),f=m[0],y=m[1],h=w((0,r.useState)(0),2),v=h[0],b=h[1];function g(e,t){var n=Math.abs(new Date(t)-new Date(e)),r=Math.ceil(n/864e5);s(r<14?a[0]:r<=31?a[1]:r<=365?a[2]:a[3])}var S=0==v?r.createElement(d,{period:c,reports:t}):r.createElement(E,{period:c,reports:t});return r.createElement("div",null,r.createElement("div",{className:"row justify-content-between"},r.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 "},r.createElement("div",{className:"card"},r.createElement("div",{className:"card-header bg_themed"},r.createElement("div",{className:"row justify-content-between align-items-center p-2"},r.createElement("h3",null,"Orders Reports"),r.createElement("div",{className:"d-flex"},r.createElement("div",{className:"btn btn-primary btn-lg reports_btn"},"Export"),r.createElement("div",{onClick:function(){b(0==v?1:0)},className:"btn btn-success btn-chartjs btn-lg reports_btn ml-2 justify-content-center align-items-center"},0==v?"Chart":"Table")))),r.createElement("div",{className:"card-content"},r.createElement("div",{className:"row justify-content-between"},r.createElement("div",{className:"col-lg-8 col-md-6 col-sm-12 col-xs-12 border-right"},S),r.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Date From"),r.createElement("input",{className:"form-control",type:"date",tabIndex:"3",name:"date_from",value:u||"",onChange:function(e){p(e.target.value),n(e.target.value,f),g(e.target.value,f)},dateformat:"yyyy-mm-dd",max:new Date})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Date From"),r.createElement("input",{className:"form-control",type:"date",tabIndex:"3",name:"date_from",value:f||"",onChange:function(e){y(e.target.value),n(u,date.target.value),g(u,date.target.value)},dateformat:"yyyy-mm-dd",max:new Date})))))))))}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(u,e);var t,n,a,o,l=(a=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(a);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={openSnackBar:!1,isError:null,responseMessage:"",snackPosition:{vertical:"top",horizontal:"center"},productItem:null},t.closeSnackBar=t.closeSnackBar.bind(O(t)),t.setResponse=t.setResponse.bind(O(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.error,r=t.message;n!==e.error?this.setResponse(n):r!==e.message&&this.setResponse(r)}},{key:"componentDidMount",value:function(){var e=(0,i.Z)((new Date).setDate((new Date).getDate()-6)),t=(0,i.Z)(new Date);this.props.fetchOrdersStatics(e,t)}},{key:"setResponse",value:function(e){var t=Object.keys(e.responseMessage)[0],n=e.responseMessage[t];n instanceof Array?this.setState({responseMessage:n[0],isError:e.isError,openSnackBar:!0}):this.setState({responseMessage:n,isError:e.isError,openSnackBar:!0})}},{key:"closeSnackBar",value:function(){this.setState({openSnackBar:!1})}},{key:"render",value:function(){var e=this.props,t=e.reportsReducer,n=e.fetchOrdersStatics,a=t.isLoading,o=t.order_reports,i=this.state,l=i.openSnackBar,u={isError:i.isError,responseMessage:i.responseMessage,openSnackBar:l,snackPosition:i.snackPosition};return r.createElement("div",null,r.createElement(c.Z,{open:a}),r.createElement(_,{reports:o,fetchOrdersStatics:n}),r.createElement(s.Z,{values:u,closeSnackBar:this.closeSnackBar}))}}])&&k(t.prototype,n),u}(r.Component);const A=(0,a.$j)((function(e){return{auth:e.authReducer,reportsReducer:e.reportsReducer,error:e.errorsReducer,message:e.messagesReducer}}),{fetchOrdersStatics:o.we})(x)},36647:(e,t,n)=>{"use strict";n.d(t,{we:()=>i,qW:()=>l,ri:()=>u,um:()=>p,Q_:()=>d});var r=n(9669),a=n.n(r),o=n(34464),c=n(58343),s=n(66808),i=function(e,t){return function(n,r){n({type:s.z5});var i=(0,o.Z)(r);a().get("../retailer/api/order_statics/?from_date=".concat(e,"&to_date=").concat(t),i).then((function(e){n({type:s.IX,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:s.ah})}))}},l=function(e,t){return function(n,r){n({type:s.z5});var i=(0,o.Z)(r);a().get("../retailer/api/retailer_statics/?from_date=".concat(e,"&to_date=").concat(t),i).then((function(e){n({type:s.mp,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:s.ah})}))}},u=function(e,t){return function(n,r){n({type:s.z5});var i=(0,o.Z)(r);a().get("../retailer/api/dist_statics/?from_date=".concat(e,"&to_date=").concat(t),i).then((function(e){n({type:s.S$,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:s.ah})}))}},p=function(e,t){return function(n,r){n({type:s.z5});var i=(0,o.Z)(r),l=t?"../retailer/api/sales_group_statics/?from_date=".concat(e,"&period=").concat(t):"../retailer/api/sales_group_statics/?from_date=".concat(e);a().get(l,i).then((function(e){n({type:s.D4,payload:e.data})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:s.ah})}))}},d=function(e,t){return function(n,r){n({type:s.z5});var i=(0,o.Z)(r);a().get("../retailer/api/sales_man_statics/?from_date=".concat(e,"&salegroup_id=").concat(t),i).then((function(e){n({type:s.N2,payload:e.data})})).catch((function(e){console.log(e);var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:s.ah})}))}}},68134:(e,t,n)=>{"use strict";function r(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}n.d(t,{Z:()=>r})},79129:(e,t,n)=>{"use strict";function r(e){return["Sun","Mon","Tue","Wed","Thur","Fri","Sat"][new Date(e).getDay()]}function a(e){return["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"][e-1]}n.d(t,{Pz:()=>r,kQ:()=>a})},69688:(e,t,n)=>{"use strict";function r(e){var t=new Date(e),n=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),r=t.getMonth()+1,a=r<10?"0".concat(r):r;return t.getFullYear()+"-"+a+"-"+n}n.d(t,{Z:()=>r})},4157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(23645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".reports_btn {\n    border-radius: 10px;\n}\n\n.view_report_graph {\n    min-height: 500px;\n}\n\n.report_sales_round_img {\n    width: 75px;\n    height: 75px;\n    overflow: hidden;\n    border-radius: 10px;\n}\n\n.report_sales_round_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n",""]);const o=a},8559:(e,t,n)=>{"use strict";var r=n(93379),a=n.n(r),o=n(4157);a()(o.Z,{insert:"head",singleton:!1}),o.Z.locals}}]);