{% extends 'distri/forms/user.html' %}
{% load static %}
{%load crispy_forms_tags %}
{% block form_title %}
    <a class="btn btn-success fa fa-reply" href="{% url 'distributor:dist-products' distributor.id distributor.name %}">&nbsp; Product List</a>
{% endblock %}
{% block form_body %}

    <div class="row">

        <div class="col col-sm-6">
            <form enctype="multipart/form-data" action="{% url 'distributor:dist-products-add' distributor.id distributor.name %}" method="post">
{% csrf_token %}
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Basic Details</h5>
                </div>
                <div class="card-body">

                     {{ form|crispy }}
                    <label for="input-images-2" >Click Anywhere IN the Box Below To Upload Product Photos</label>
                    <div id="input-images-2"  style="padding-top: .5rem;"></div>
                </div>
                <div class="card-footer">
                    <input type="submit" value="Create Product" class="btn btn-success form-control">
                </div>

            </div>
</form>
        </div>

        <div class="col col-sm-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Price Levels</h5>
                </div>
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Quantity</th>
                            <th>price</th>
                            <th></th>
                        </tr>

                        </thead>
                        <tbody id="price_level_body">
                        {% for pr_p in pr_prices %}
                            <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ pr_p.above }} - {{ pr_p.below }}</td>

                            <td>{{ pr_p.price }}</td>
                            <td>
                            <button type="button" class="btn btn-warning fa fa-edit"></button>
                            <button type="button" class="btn btn-danger fa fa-trash"></button>
                            </td>
                            </tr>
                        {% endfor %}


                        </tbody>
                    </table>
                    <div class="card-header" >
                        <h5 class="card-title">
                            Add Price Level
                        </h5>
                    </div>

                <div class="card-body">
                    <form method="POST" action="">
                        {% csrf_token %}
                    {{ form2|crispy }}
                        <button type="submit"  class="form-control btn-success">Add Price Level</button>
                     </form>

                </div>
                </div>
                <div class="card-footer">

                </div>

            </div>

        </div>

 </div>


{% endblock %}


{% block addCss %}
    <style>
        #id_price_1{
        max-width: 80%;
        }
        textarea {
            height: 4em;
            width: 50em;
        }
    </style>
{% endblock %}

{% block addJs %}
    <script type="application/javascript" src="{% static 'vendors/image-uploader/image-uploader.min.js' %}"></script>
    <script type="application/javascript">
    jQuery('#input-images-2').imageUploader({
        imagesInputName: 'photos',
        maxSize: 2 * 1024 * 1024,
        maxFiles: 10,
        label:'Drag or Click To Upload Product Images',
});
    jQuery('input[name="photos[]"]').attr('accept','image/*');

    function add_priceLevels(){
        var add_body='<tr> <td> ' +
            '<input required="required" min="1" type="number" name="min[]" class="form-control border-left-0 border-right-0 border-top-0 "> ' +
            '</td> ' +
            '<td> <input required="required" min="1" type="number" name="max[]" class="form-control border-left-0 border-right-0 border-top-0 "> ' +
            '</td> ' +
            '<td> ' +
            '<input required="required" min="1" type="number" name="price[]" class="form-control border-left-0 border-right-0 border-top-0 "> ' +
            '</td> </tr>';
        jQuery('#price_level_body').append(add_body);
    }
    </script>
{% endblock %}